# Perl 命令行正则替换
参考： https://www.atrixnet.com/in-line-search-and-replace-in-files-with-real-perl-regular-expressions/

```shell
perl -p -i -e 's/change this/to that/g' file1 file2 file3...
```

# Docker 仅执行一次的命令
参考：https://docs.docker.com/engine/reference/run/#clean-up---rm

```shell
$ docker run -it --rm hello-world
```
# Nginx配置websocket支持
```
upstream kafka-ws {
  # myhost:myport 是实际的web服务
  server myhost:myport;
} 
server {
  listen 80;
  # xxx.mydomain.com 是对外服务的域名
  server_name xxx.mydomain.com;
  location /{
    proxy_set_header Host $host;
    proxy_pass http://kafka-ws;
    
    # 下面几行是对websocke专门配置的
    proxy_http_version 1.1;
    proxy_buffering off;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
  }
}
```

# Docker 启动 Nginx TCP代理
参考：https://hub.docker.com/r/jetbrainsinfra/nginx-tcp-proxy
在经由 18085 代理到 myhost:18080

```shell
$ sudo docker run -it --rm -p 18085:18080 -e LISTEN_PORT=18080 -e BACKEND_HOST=myhost -e BACKEND_PORT=18080 jetbrainsinfra/nginx-tcp-proxy
```

