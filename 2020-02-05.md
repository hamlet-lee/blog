# Presto Planer 的改进
https://prestodb.io/blog/2019/12/23/improve-presto-planner  

总的来说，会支持更好的 ppd。  
有空可以学习下。  

学习记录：  
这个改进让Connector可以提供optimizer。optimizer 面对的是已经resolve好的节点。方便shared。  
optimizer的时机是在 add exchange之前，以及计划完成之前。  

依赖于这次改进，fb有个提高hive读取性能的扩展aria： 
https://engineering.fb.com/data-infrastructure/aria-presto/  
似乎可以提高性能不少。  

另外，似乎可以用于实现"行级别"的数据安全。即可通过一个SecurityConnector来包裹实际的Connector，从而可以插入Filter.

# 关于Map的性能
这篇提到一些改进
https://prestodb.io/blog/2019/09/26/tablescan-structs

在aria项目中，struct能够达到原生列的性能了；  
对于map，则仍然慢。  
Presto 的 ORC 分支 DWRF 对map存储做了优化（称为flat map），即每个stripe使用原生列存储 Map。使得 map 能达到 struct 并能达到 top level column 的性能。
